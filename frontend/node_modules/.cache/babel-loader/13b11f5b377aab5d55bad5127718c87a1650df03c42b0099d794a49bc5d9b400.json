{"ast":null,"code":"import _objectSpread from\"/home/opt/BUAS/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Login Component for BUAS RBAC System\n// Following BUAS_RBAC_IMPLEMENTATION_GUIDE.md - Segment 3\nimport React,{useState,useEffect}from'react';import authService from'../services/authService';import'./Login.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Login=_ref=>{let{onLoginSuccess}=_ref;const[formData,setFormData]=useState({username:'',password:'',remember:false});const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const[attemptsLeft,setAttemptsLeft]=useState(null);const[mustChangePassword,setMustChangePassword]=useState(false);// Check if already authenticated on component mount\nuseEffect(()=>{const checkExistingAuth=async()=>{try{const isAuth=await authService.checkAuth();if(isAuth){onLoginSuccess();}}catch(error){console.log('Not authenticated:',error);}};checkExistingAuth();},[onLoginSuccess]);const handleInputChange=e=>{const{name,value,type,checked}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='checkbox'?checked:value}));// Clear error when user starts typing\nif(error){setError('');}};const handleSubmit=async e=>{e.preventDefault();if(!formData.username.trim()||!formData.password){setError('Please enter both username and password');return;}setIsLoading(true);setError('');setAttemptsLeft(null);try{const result=await authService.login(formData.username.trim(),formData.password,formData.remember);if(result.success){if(result.mustChangePassword){setMustChangePassword(true);}else{onLoginSuccess();}}else{setError(result.error||'Login failed');if(result.attemptsLeft!==undefined){setAttemptsLeft(result.attemptsLeft);}}}catch(error){setError('Network error. Please check your connection.');console.error('Login error:',error);}finally{setIsLoading(false);}};const getErrorMessage=()=>{if(!error)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"login-error\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"error-icon\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"span\",{children:error}),attemptsLeft!==null&&attemptsLeft>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"attempts-warning\",children:[attemptsLeft,\" attempt\",attemptsLeft!==1?'s':'',\" remaining\"]}),attemptsLeft===0&&/*#__PURE__*/_jsx(\"div\",{className:\"lockout-warning\",children:\"Account locked. Contact administrator.\"})]});};const getMustChangePasswordMessage=()=>{if(!mustChangePassword)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"login-warning\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"warning-icon\",children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsx(\"span\",{children:\"You must change your password after login\"}),/*#__PURE__*/_jsx(\"button\",{className:\"continue-button\",onClick:onLoginSuccess,children:\"Continue to Change Password\"})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-page\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login-background\",children:/*#__PURE__*/_jsx(\"div\",{className:\"background-pattern\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"login-logo\",children:/*#__PURE__*/_jsx(\"div\",{className:\"logo-circle\",children:/*#__PURE__*/_jsx(\"span\",{className:\"logo-text\",children:\"BUAS\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"login-title\",children:\"BUAS Command Center\"}),/*#__PURE__*/_jsx(\"p\",{className:\"login-subtitle\",children:\"Briech UAS System\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"sr-only\",children:\"Username\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-icon\",children:\"\\uD83D\\uDC64\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",name:\"username\",placeholder:\"Username\",value:formData.username,onChange:handleInputChange,autoComplete:\"username\",required:true,className:\"login-input\",disabled:isLoading})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"sr-only\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-icon\",children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",placeholder:\"Password\",value:formData.password,onChange:handleInputChange,autoComplete:\"current-password\",required:true,className:\"login-input\",disabled:isLoading})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-options\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"remember-me\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"remember\",checked:formData.remember,onChange:handleInputChange,disabled:isLoading}),/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Remember me for 7 days\"})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-button \".concat(isLoading?'loading':''),disabled:isLoading,children:isLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"loading-spinner\"}),\"Signing In...\"]}):'Sign In'}),getErrorMessage(),getMustChangePasswordMessage()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-footer\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"login-help\",children:\"Contact your administrator for password assistance\"}),/*#__PURE__*/_jsx(\"p\",{className:\"login-copyright\",children:\"\\xA9 2025 BUAS - All Rights Reserved\"})]})]})]});};export default Login;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}