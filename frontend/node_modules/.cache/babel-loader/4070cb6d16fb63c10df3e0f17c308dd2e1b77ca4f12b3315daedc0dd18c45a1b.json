{"ast":null,"code":"import _objectSpread from\"/home/opt/BUAS/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo}from'react';import{useParams,useNavigate}from'react-router-dom';import DeviceDetailMap from'./DeviceDetailMap';import RecordingControlButton from'./RecordingControlButton';import PhoneNumberModal from'./PhoneNumberModal';import ApiService from'../services/api';import authService from'../services/authService';import'./DeviceDetail.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DeviceDetail=_ref=>{var _deviceExtendedInfo$b,_deviceExtendedInfo$b2,_deviceInfo$location,_deviceInfo$location2,_deviceExtendedInfo$c,_deviceExtendedInfo$c2,_deviceExtendedInfo$c3;let{user}=_ref;const{deviceId}=useParams();const navigate=useNavigate();const[deviceInfo,setDeviceInfo]=useState(null);const[locationData,setLocationData]=useState([]);const[recordingEvents,setRecordingEvents]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[showAllNumbers,setShowAllNumbers]=useState(false);const[deviceExtendedInfo,setDeviceExtendedInfo]=useState({android_id:null,phone_numbers:[],contacts:[]});const[recordingStatus,setRecordingStatus]=useState(null);const[showRenameModal,setShowRenameModal]=useState(false);const[newDisplayName,setNewDisplayName]=useState('');const[renameError,setRenameError]=useState('');const[renameLoading,setRenameLoading]=useState(false);// Export state\nconst[showExportModal,setShowExportModal]=useState(false);const[exportLoading,setExportLoading]=useState(false);const[exportError,setExportError]=useState('');const[exportStartDate,setExportStartDate]=useState('');const[exportEndDate,setExportEndDate]=useState('');// Phone number modal state\nconst[showPhoneModal,setShowPhoneModal]=useState(false);const[phoneNumbers,setPhoneNumbers]=useState([]);// Memoize initial phone numbers to prevent unnecessary re-renders\nconst initialPhoneNumbers=useMemo(()=>{return phoneNumbers.length>0?phoneNumbers:deviceExtendedInfo.phone_numbers||[];},[phoneNumbers,deviceExtendedInfo.phone_numbers]);// Real-time polling\nuseEffect(()=>{const fetchDeviceData=async()=>{try{// Fetch each endpoint separately to handle partial failures\nconst results=await Promise.allSettled([ApiService.getDeviceDetails(deviceId),ApiService.getDeviceLocationHistory(deviceId,{per_page:10000}),ApiService.getDeviceRecordingEvents(deviceId),ApiService.getDeviceExtendedInfo(deviceId),ApiService.getRecordingStatus(deviceId)]);const[deviceResponse,locationResponse,eventsResponse,extendedInfoResponse,recordingStatusResponse]=results;// Handle device details\nif(deviceResponse.status==='fulfilled'){setDeviceInfo(deviceResponse.value.data);}else{var _deviceResponse$reaso,_deviceResponse$reaso2,_deviceResponse$reaso3,_deviceResponse$reaso4,_deviceResponse$reaso5;console.error('Device details failed:',deviceResponse.reason);// Check if it's an access denied error\nif((_deviceResponse$reaso=deviceResponse.reason)!==null&&_deviceResponse$reaso!==void 0&&(_deviceResponse$reaso2=_deviceResponse$reaso.message)!==null&&_deviceResponse$reaso2!==void 0&&_deviceResponse$reaso2.includes('Permission denied')||(_deviceResponse$reaso3=deviceResponse.reason)!==null&&_deviceResponse$reaso3!==void 0&&(_deviceResponse$reaso4=_deviceResponse$reaso3.message)!==null&&_deviceResponse$reaso4!==void 0&&_deviceResponse$reaso4.includes('Access denied')||((_deviceResponse$reaso5=deviceResponse.reason)===null||_deviceResponse$reaso5===void 0?void 0:_deviceResponse$reaso5.status)===403){setError('Access denied: You don\\'t have permission to view this device. Contact your administrator if you need access.');return;}}// Handle location history\nif(locationResponse.status==='fulfilled'){setLocationData(locationResponse.value.data);}else{console.error('Location history failed:',locationResponse.reason);setLocationData([]);}// Handle recording events\nif(eventsResponse.status==='fulfilled'){setRecordingEvents(eventsResponse.value.data);}else{console.error('Recording events failed:',eventsResponse.reason);setRecordingEvents([]);}// Handle extended info\nif(extendedInfoResponse.status==='fulfilled'){setDeviceExtendedInfo(extendedInfoResponse.value);}else{console.error('Extended info failed:',extendedInfoResponse.reason);setDeviceExtendedInfo({android_id:null,phone_numbers:[],contacts:[]});}// Handle recording status\nif(recordingStatusResponse.status==='fulfilled'){setRecordingStatus(recordingStatusResponse.value.recording_status);}else{console.error('Recording status failed:',recordingStatusResponse.reason);setRecordingStatus(null);}// Only set error if device details (the most important) failed and it's not an access error\nif(deviceResponse.status==='rejected'&&!error){setError('Failed to load device data');}else if(deviceResponse.status==='fulfilled'){setError(null);}}catch(err){setError('Failed to load device data');console.error('Error fetching device data:',err);}finally{setLoading(false);}};fetchDeviceData();// Poll every 10 seconds for real-time updates\nconst interval=setInterval(fetchDeviceData,10000);return()=>clearInterval(interval);},[deviceId]);const handleViewContacts=()=>{navigate(\"/device/\".concat(deviceId,\"/contacts\"));};const handleViewLocationTable=()=>{navigate(\"/device/\".concat(deviceId,\"/location\"),{state:{locationData,deviceInfo,recordingEvents}});};const handleViewAudioTable=()=>{navigate(\"/device/\".concat(deviceId,\"/recordings\"),{state:{recordingEvents,deviceInfo,locationData}});};const handleViewSmsTable=()=>{navigate(\"/device/\".concat(deviceId,\"/sms\"),{state:{deviceInfo,deviceId}});};const handleViewCallLogsTable=()=>{navigate(\"/device/\".concat(deviceId,\"/call_logs\"),{state:{deviceInfo,deviceId}});};const handleViewExternalStorage=()=>{navigate(\"/device/\".concat(deviceId,\"/external-storage\"),{state:{deviceInfo,deviceId}});};const handleRecordingStatusChange=(deviceId,updatedRecordingStatus)=>{setRecordingStatus(updatedRecordingStatus);};const canRenameDevice=()=>{return(user===null||user===void 0?void 0:user.role)==='super_super_admin'||(user===null||user===void 0?void 0:user.role)==='super_user';};const handleRenameDevice=async()=>{if(!newDisplayName.trim()){setRenameError('Display name cannot be empty');return;}setRenameLoading(true);setRenameError('');try{const response=await authService.authenticatedFetch(\"/api/device/\".concat(deviceId,\"/rename\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({display_name:newDisplayName.trim()})});if(response.ok){const data=await response.json();setDeviceInfo(prev=>_objectSpread(_objectSpread({},prev),{},{display_name:data.display_name}));setShowRenameModal(false);setNewDisplayName('');}else{const errorData=await response.json();setRenameError(errorData.error||'Failed to rename device');}}catch(error){setRenameError('Network error. Please try again.');}finally{setRenameLoading(false);}};const handleResetDeviceName=async()=>{setRenameLoading(true);setRenameError('');try{const response=await authService.authenticatedFetch(\"/api/device/\".concat(deviceId,\"/reset-name\"),{method:'PUT'});if(response.ok){const data=await response.json();setDeviceInfo(prev=>_objectSpread(_objectSpread({},prev),{},{display_name:data.display_name}));setShowRenameModal(false);setNewDisplayName('');}else{const errorData=await response.json();setRenameError(errorData.error||'Failed to reset device name');}}catch(error){setRenameError('Network error. Please try again.');}finally{setRenameLoading(false);}};// Export functionality\nconst canExportDevice=()=>{// Operators cannot export, analysts can export assigned devices, super users can export any device\nreturn(user===null||user===void 0?void 0:user.role)!=='operator';};const handleExportDevice=async()=>{setExportLoading(true);setExportError('');try{const response=await ApiService.exportDeviceData(deviceId,exportStartDate,exportEndDate);// Create blob and download\nconst blob=await response.blob();const url=window.URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;// Generate filename\nconst today=new Date().toISOString().split('T')[0];const deviceName=(deviceInfo===null||deviceInfo===void 0?void 0:deviceInfo.display_name)||deviceId;a.download=\"\".concat(deviceName,\"_data_export_\").concat(today,\".xlsx\");document.body.appendChild(a);a.click();window.URL.revokeObjectURL(url);document.body.removeChild(a);// Close modal and reset form\nsetShowExportModal(false);setExportStartDate('');setExportEndDate('');// Show success message (you might want to add a toast notification here)\nconsole.log('Device data exported successfully');}catch(error){setExportError(error.message||'Failed to export device data');}finally{setExportLoading(false);}};const getRecordingState=()=>{if(!recordingStatus)return'idle';// Handle offline devices\nif(!recordingStatus.can_control&&recordingStatus.last_seen_minutes>7){return'offline';}return recordingStatus.recording_state;};const togglePhoneNumbers=()=>{setShowAllNumbers(!showAllNumbers);};const handleSavePhoneNumbers=async newPhoneNumbers=>{try{const response=await ApiService.updateDevicePhoneNumbers(deviceId,newPhoneNumbers);if(response.success){setPhoneNumbers(newPhoneNumbers);// Also update the deviceExtendedInfo to reflect the change\nsetDeviceExtendedInfo(prev=>_objectSpread(_objectSpread({},prev),{},{phone_numbers:newPhoneNumbers}));}}catch(error){console.error('Failed to save phone numbers:',error);throw error;}};const renderPhoneNumbers=()=>{const currentPhoneNumbers=phoneNumbers.length>0?phoneNumbers:deviceExtendedInfo.phone_numbers||[];if(currentPhoneNumbers.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"phone-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter phone number(s)\",className:\"phone-input-field\",readOnly:true,onClick:()=>setShowPhoneModal(true)}),/*#__PURE__*/_jsx(\"button\",{className:\"phone-edit-btn\",onClick:()=>setShowPhoneModal(true),title:\"Add phone numbers\",children:\"\\u270F\\uFE0F\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"phone-display-container\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"phone-display\",children:currentPhoneNumbers.join(', ')}),/*#__PURE__*/_jsx(\"button\",{className:\"phone-edit-btn\",onClick:()=>setShowPhoneModal(true),title:\"Edit phone numbers\",children:\"\\u270F\\uFE0F\"})]});};const getBatteryClass=batteryLevel=>{if(batteryLevel>=60)return'battery-high';if(batteryLevel>=30)return'battery-medium';return'battery-low';};const getBatteryIcon=(batteryLevel,isCharging)=>{if(isCharging)return'ðŸ”‹';// Charging icon\nif(batteryLevel>=75)return'ðŸ”‹';// Full battery\nif(batteryLevel>=50)return'ðŸ”‹';// Medium battery\nif(batteryLevel>=25)return'ðŸ”‹';// Low battery\nreturn'ðŸª«';// Very low battery\n};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"device-detail-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-device\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading device details...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"device-detail-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-state\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u274C Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),className:\"btn btn-secondary\",children:\"\\u2190 Back to Dashboard\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"device-detail-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"device-header\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),className:\"back-button\",children:\"\\u2190 Back to Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"device-title\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"\\uD83D\\uDCF1 \",(deviceInfo===null||deviceInfo===void 0?void 0:deviceInfo.display_name)||deviceId]}),(deviceExtendedInfo===null||deviceExtendedInfo===void 0?void 0:(_deviceExtendedInfo$b=deviceExtendedInfo.battery)===null||_deviceExtendedInfo$b===void 0?void 0:_deviceExtendedInfo$b.level)!==null&&(deviceExtendedInfo===null||deviceExtendedInfo===void 0?void 0:(_deviceExtendedInfo$b2=deviceExtendedInfo.battery)===null||_deviceExtendedInfo$b2===void 0?void 0:_deviceExtendedInfo$b2.level)!==undefined&&/*#__PURE__*/_jsxs(\"div\",{className:\"battery-indicator \".concat(deviceExtendedInfo.battery.is_charging?'battery-charging':'',\" \").concat(deviceExtendedInfo.battery.level<15?'battery-critical':''),title:\"Battery: \".concat(deviceExtendedInfo.battery.level,\"%\\n\").concat(deviceExtendedInfo.battery.is_charging?\"Charging via \".concat(deviceExtendedInfo.battery.charging_method||'Unknown'):'Not charging',\"\\nHealth: \").concat(deviceExtendedInfo.battery.health||'Unknown',\"\\n\").concat(deviceExtendedInfo.battery.temperature?\"Temperature: \".concat(deviceExtendedInfo.battery.temperature,\"\\xB0C\"):'',\"\\n\").concat(deviceExtendedInfo.battery.voltage?\"Voltage: \".concat(deviceExtendedInfo.battery.voltage,\"mV\"):'',\"\\n\").concat(deviceExtendedInfo.battery.last_updated?\"Updated: \".concat(new Date(deviceExtendedInfo.battery.last_updated).toLocaleString()):''),children:[/*#__PURE__*/_jsxs(\"span\",{className:\"battery-level \".concat(getBatteryClass(deviceExtendedInfo.battery.level)),children:[getBatteryIcon(deviceExtendedInfo.battery.level,deviceExtendedInfo.battery.is_charging),deviceExtendedInfo.battery.level,\"%\"]}),deviceExtendedInfo.battery.is_charging&&/*#__PURE__*/_jsx(\"span\",{className:\"charging-indicator\",title:\"Charging via \".concat(deviceExtendedInfo.battery.charging_method||'Unknown'),children:\"\\u26A1\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"device-title-actions\",children:[canRenameDevice()&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-secondary rename-btn\",onClick:()=>{setNewDisplayName((deviceInfo===null||deviceInfo===void 0?void 0:deviceInfo.display_name)||'');setShowRenameModal(true);setRenameError('');},title:\"Rename Device\",children:\"\\u270F\\uFE0F Rename\"}),canExportDevice()&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-primary export-btn\",onClick:()=>{setShowExportModal(true);setExportError('');},title:\"Export Device Data\",children:\"\\uD83D\\uDCE4 Export Data\"})]})]})]}),showRenameModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content rename-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Rename Device\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:()=>{setShowRenameModal(false);setRenameError('');},children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"displayName\",children:\"Display Name:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"displayName\",type:\"text\",value:newDisplayName,onChange:e=>setNewDisplayName(e.target.value),placeholder:\"Enter device display name\",maxLength:100,disabled:renameLoading}),/*#__PURE__*/_jsxs(\"small\",{className:\"help-text\",children:[\"This name will be displayed instead of the device ID. Original device ID: \",deviceId]})]}),renameError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:renameError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>{setShowRenameModal(false);setRenameError('');},disabled:renameLoading,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning\",onClick:handleResetDeviceName,disabled:renameLoading,children:renameLoading?'Resetting...':'Reset to Original'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleRenameDevice,disabled:renameLoading||!newDisplayName.trim(),children:renameLoading?'Saving...':'Save Name'})]})]})}),showExportModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content export-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCE4 Export Device Data\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:()=>{setShowExportModal(false);setExportError('');},children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"export-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Device:\"}),\" \",(deviceInfo===null||deviceInfo===void 0?void 0:deviceInfo.display_name)||deviceId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Export Format:\"}),\" Excel (.xlsx)\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Data Included:\"}),\" Locations, Recordings, Contacts\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"startDate\",children:\"Start Date (Optional):\"}),/*#__PURE__*/_jsx(\"input\",{id:\"startDate\",type:\"date\",value:exportStartDate,onChange:e=>setExportStartDate(e.target.value),disabled:exportLoading,max:exportEndDate||new Date().toISOString().split('T')[0]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"endDate\",children:\"End Date (Optional):\"}),/*#__PURE__*/_jsx(\"input\",{id:\"endDate\",type:\"date\",value:exportEndDate,onChange:e=>setExportEndDate(e.target.value),disabled:exportLoading,min:exportStartDate,max:new Date().toISOString().split('T')[0]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"help-text\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Leave dates empty to export all historical data. Export includes all device data across multiple Excel tabs.\"})}),exportError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:exportError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>{setShowExportModal(false);setExportError('');},disabled:exportLoading,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleExportDevice,disabled:exportLoading,children:exportLoading?'ðŸ“¤ Exporting...':'ðŸ“¤ Export Excel File'})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"device-summary\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA Device Summary\"}),!deviceExtendedInfo.android_id&&(!deviceExtendedInfo.phone_numbers||deviceExtendedInfo.phone_numbers.length===0)&&(!deviceExtendedInfo.contacts||deviceExtendedInfo.contacts.length===0)&&/*#__PURE__*/_jsxs(\"div\",{className:\"device-info-notice\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u2139\\uFE0F \",/*#__PURE__*/_jsx(\"strong\",{children:\"Device Information Not Available\"})]}),/*#__PURE__*/_jsx(\"p\",{children:\"This device hasn't synced its information yet. Device details (Android ID, phone numbers, contacts) will appear here once the device uploads its data.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row summary-data-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-label\",children:\"Current Location:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"item-value\",children:deviceInfo!==null&&deviceInfo!==void 0&&(_deviceInfo$location=deviceInfo.location)!==null&&_deviceInfo$location!==void 0&&_deviceInfo$location.lat&&deviceInfo!==null&&deviceInfo!==void 0&&(_deviceInfo$location2=deviceInfo.location)!==null&&_deviceInfo$location2!==void 0&&_deviceInfo$location2.lng?\"\".concat(deviceInfo.location.lat.toFixed(4),\", \").concat(deviceInfo.location.lng.toFixed(4)):'Location not available'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-label\",children:\"Total Recordings:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"item-value\",children:recordingEvents.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-label\",children:\"Last Seen:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"item-value\",children:(deviceInfo===null||deviceInfo===void 0?void 0:deviceInfo.last_seen)||'Never'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-label\",children:\"Android ID:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"item-value\",children:deviceExtendedInfo.android_id||'Not available - Device not synced'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row summary-actions-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-label\",children:\"Recording Control:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"item-value\",children:/*#__PURE__*/_jsx(RecordingControlButton,{deviceId:deviceId,initialStatus:getRecordingState(),onStatusChange:handleRecordingStatusChange,disabled:loading})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"item-label\",children:\"Phone Numbers:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"item-value\",children:renderPhoneNumbers()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-item\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"summary-btn btn-contacts\",onClick:handleViewContacts,title:((_deviceExtendedInfo$c=deviceExtendedInfo.contacts)===null||_deviceExtendedInfo$c===void 0?void 0:_deviceExtendedInfo$c.length)===0?\"No contacts available - Device needs to sync\":\"\",children:[\"\\uD83D\\uDCDE View Contacts (\",((_deviceExtendedInfo$c2=deviceExtendedInfo.contacts)===null||_deviceExtendedInfo$c2===void 0?void 0:_deviceExtendedInfo$c2.length)||0,\")\",((_deviceExtendedInfo$c3=deviceExtendedInfo.contacts)===null||_deviceExtendedInfo$c3===void 0?void 0:_deviceExtendedInfo$c3.length)===0&&/*#__PURE__*/_jsx(\"span\",{className:\"sync-indicator\",children:\" - Not synced\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"summary-btn btn-location-table\",onClick:handleViewLocationTable,children:\"\\uD83D\\uDCCD Location Table\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"summary-btn btn-audio-table\",onClick:handleViewAudioTable,children:\"\\uD83C\\uDFB5 Audio Recordings\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"summary-btn btn-sms-table\",onClick:handleViewSmsTable,children:\"\\uD83D\\uDCAC SMS Messages\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-item\",children:/*#__PURE__*/_jsx(\"button\",{className:\"summary-btn btn-call-logs-table\",onClick:handleViewCallLogsTable,children:\"\\uD83D\\uDCDE Call Logs\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"summary-item\",style:{display:'none'},children:/*#__PURE__*/_jsx(\"button\",{className:\"summary-btn btn-external-storage\",onClick:handleViewExternalStorage,children:\"\\uD83D\\uDCC1 External Storage\"})})]})]})}),/*#__PURE__*/_jsx(DeviceDetailMap,{deviceId:deviceId}),/*#__PURE__*/_jsx(PhoneNumberModal,{isOpen:showPhoneModal,onClose:()=>setShowPhoneModal(false),onSave:handleSavePhoneNumbers,initialPhoneNumbers:initialPhoneNumbers,deviceId:deviceId})]});};export default DeviceDetail;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}